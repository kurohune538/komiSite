var pageStatus;
$(document).ready(function() {
  //load画面
  loadImg();
  $(window).scroll(function() {
    var st = $(window).scrollTop();
    console.log("scrollTop" + st);
    headerFadeIn(st);
  });
  scrollToContent();
  pageStatus = 'about';
  appendDom('about');
});

//読み込み終了時
window.onload = function() {
  $(function() {
    $('.loading-bg').fadeOut(1500, function() {isLoaded = true;});
  })

}

var deg = 0;
var isLoaded = false;
function loadImg() {
  deg += 180;
  $('.loading-img').css('transform', 'rotate('+ deg + 'deg)');
  if(isLoaded){
  }
  setTimeout(loadImg,1700);
}

//scrollさせる、終わったらheader出現
function scrollToContent() {
  $('.next-pointer img').click(function() {
    $('body').animate({
      scrollTop: $('.about-content-wrapper').offset().top
    }, 1200,headerFadeIn());
  });
}

function headerFadeIn(scroll) {
  $('header').fadeIn(1200);
  $('.top-wrapper').fadeOut(2000);
  //$('html').css('overflow', 'auto');
}

function appendDom(category) {
  pageStatus = category;
  if(pageStatus =='about') {
    //contentを入れ替え
    $('.works-content-wrapper').fadeOut('slow');
    $('.about-content-wrapper').fadeIn(1000);
    //tabの背景色の初期化
    $('ul.menu li a').css('background-color', 'rgba(0,0,0,0)');

    //headerの色の変更
    $('.header-wrapper').animate({
      backgroundColor: "#FFEC00"
    }, 500);
    $('img.six-green').fadeOut(500);
    $('img.six-yellow').fadeIn(500);
    //aboutのみずっとオレンジ
    $('.about-tab').animate({
      backgroundColor: "#FFBB3A"
    }, 0);

    //その他はhoverで戻る
    $('.works-tab, .blog-tab, .contact-tab').hover(function() {
      $(this).animate({
        backgroundColor: "#FFBB3A"
      }, 100);
    }, function() {
      $(this).animate({
        backgroundColor: "rgba(126,211,33,0)"
      }, 100);
    });
    $('.about-tab').hover(function() {
      $(this).animate({
        backgroundColor: "#FFBB3A"
      }, 0);
    })
  }else if (pageStatus == 'works') {
    resetWorks();
    //contentを入れ替え
    $('.about-content-wrapper').fadeOut('slow');
    $('.works-content-wrapper').fadeIn(1000, function() {
      worksAnimation();
    });
    //html背景の色の変化
    $('html').animate({
      backgroundColor: '#8ED63E'
    },500);
    //tabの背景色の初期化
    $('ul.menu li a').css('background-color', 'rgba(0,0,0,0)');

    //worksのみずっと緑
    $('.works-tab').animate({
      backgroundColor: "#8ED63E"
    }, 0);

    //headerの色の変更
    $('.header-wrapper').animate({
      backgroundColor: "#539B00"
    }, 500);
    $('.six-yellow').fadeOut(500);
    $('.six-green').fadeIn(500);
    //その他はhoverで戻る
    $('.about-tab, .blog-tab, .contact-tab').hover(function() {
      $(this).animate({
        backgroundColor: "#8ED63E"
      }, 100);
    }, function() {
      $(this).animate({
        backgroundColor: "rgba(126,211,33,0)"
      }, 100);
    });
    $('.works-tab').hover(function() {
      $(this).animate({
        backgroundColor: "#8ED63E"
      }, 0);
    })

  }else if (pageStatus == 'blog') {
    $('.about-content-wrapper').fadeOut('slow');

  }else {
    $('.about-content-wrapper').fadeOut('slow');

  }
}
//about----------------------------------------------
function aboutAnimation() {

}
//works----------------------------------------------
var worksCount = 0;
var worksCategory = ['.web-works','.app-works','.hardware-works', '.mp-works'];
function worksAnimation() {
  slideInWorks(worksCategory[worksCount]);
  fadeInIcons();
}
//画面外から表示して移動させる
function slideInWorks(works) {
  $(works).css('display', 'block');
  $(works).animate({
    marginTop: '0'
  }, 700,'easeOutCirc',function(){
    fadeInIcons();
    worksCount += 1;
    slideInWorks(worksCategory[worksCount]);
  });

}

//iconをフェードイン
function fadeInIcons() {
  $(worksCategory[worksCount] + ' .centering-wrapper').fadeIn(700);
}

//webをおした時
function showWebWorks() {
  $('.web-works .centering-wrapper').fadeOut(0,showWorksList('web'));
  $('.web-works').animate({
    width: '100%'
  }, 500);
}

//Mobile Appをおした時
function showAppWorks() {
  $('.app-works .centering-wrapper').fadeOut(0,showWorksList('app'));
  $('.web-works').animate({
    width: '0%'
  }, 500);
  $('.web-works').fadeOut(0);
  $('.app-works').animate({
    width: '100%'
  }, 500);

}
function showHardWareWorks() {
  $('.hardware-works .centering-wrapper').fadeOut(0,showWorksList('hardware'));
  $('.web-works, .app-works').animate({
    width: '0%'
  }, 500);
  $('.web-works, .app-works').fadeOut(0);
  $('.hardware-works').animate({
    width: '100%'
  }, 500);
}
function showMpWorks() {
  $('.mp-works .centering-wrapper').fadeOut(0,showWorksList('mp'));
  $('.web-works, .app-works, .hardware-works').animate({
    width: '0%'
  }, 500);
  $('.web-works, .app-works, .hardware-works').fadeOut(0);
  $('.mp-works').animate({
    width: '100%'
  }, 500);
}

function resetWorks () {
  //アニメーションの順番をリセット
  worksCount = 0;
  $('ul.menu li a').css('background-color', 'rgba(0,0,0,0)');
  //座標を戻す
  $('.web-works, .hardware-works').css({
      width: '25%',
      marginTop: '-100%'
  });
  $('.app-works, .mp-works').css({
    width: '25%',
    marginTop:'100%'
  });
  $('.web-works .centering-wrapper img, .app-works .centering-wrapper img, .hardware-works .centering-wrapper img, .mp-works .centering-wrapper img').animate({
    width: '20%',
  }, 0);
  //全て非表示に
  $('.centering-wrapper, .works-list, .icon-title-wrapper').css('display', 'none');
}
//将来的にはDBからとる
function showWorksList(works) {
  if(works=='web') {
    $('.works-list, .icon-title-wrapper').fadeIn(2000);
  } else if(works=='app') {
    $('.works-list, .icon-title-wrapper').fadeIn(2000);
  } else if(works=='hardware') {
    $('.works-list, .icon-title-wrapper').fadeIn(2000);
  } else if(works=='mp') {
    $('.works-list, .icon-title-wrapper').fadeIn(2000);
  }
}

  // $('.web-works .centering-wrapper, .app-works .centering-wrapper, .hardware-works .centering-wrapper, .mp-works .centering-wrapper').css(
  //   'display', 'none'
  // );


//blog----------------------------------------------
function blogAnimation() {
}

//contact----------------------------------------------
function contactAnimation() {

}
